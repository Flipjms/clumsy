$(function(){if($(".click-once:not(.must-confirm)").click(function(){$(this).add($(this).siblings(".click-once")).prop("disabled",!0),$(this).addClass("loading")}),$(".with-tooltip").tooltip(),$(".navbar").on("show.bs.dropdown",function(a){$el=$(a.target),$el.hasClass("with-tooltip")&&($el.tooltip("destroy"),$el.one("hide.bs.dropdown",function(a){$el.tooltip()}))}),$(".delete").click(function(a){$(this).closest("form").next(".delete-form").submit()}),$(".delete-form").submit(function(a){var b=$(this).hasClass("user")?handover.admin.strings.delete_confirm_user:handover.admin.strings.delete_confirm;return confirm(b)?($form=$(this).prev("form"),$del=$(".delete",$form),$del.add('button[type="submit"]',$form).prop("disabled",!0),$del.addClass("loading"),!0):!1}),$(".rich-text").length&&tinymce.init($.extend({selector:".rich-text",content_css:handover.admin.urls.base+"/../packages/clumsy/cms/css/tinymce.css",menubar:!1,toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | removeformat",statusbar:!1,plugins:"autoresize"},"undefined"==typeof handover.admin.tinymce?{}:handover.admin.tinymce)),$(".panel-translatable").length&&$(".panel-translatable .has-error").length&&$(".tab-pane").each(function(a,b){if($(".has-error",b).length){var c=$(b).attr("id");return $('a[href="#'+c+'"], a[data-target="'+c+'"]').tab("show"),!1}}),$(".datepicker").length&&$(".datepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".datetimepicker").length&&$(".datetimepicker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss"}),$(".timepicker").length&&$(".timepicker").timepicker({timeFormat:"HH:mm:ss"}),$(".colorpicker").length&&($(".colorpicker").iris($.extend({hide:!0},"undefined"==typeof handover.admin.colorpicker?{}:handover.admin.colorpicker)),$(document).on("click",function(a){if("form-control colorpicker"==$(a.target).attr("class"))$(a.target).iris("show");else{var b=$(".iris-picker, .iris-picker-inner");("undefined"==typeof a||!b.is(a.target)&&0===b.has(a.target).length)&&$(".colorpicker").iris("hide")}})),$(".coordinates").length&&$(".coordinates").each(function(){var a,b=$(this),c=b.find("input").eq(0),d=b.find("input").eq(1),e=null,f=function(b,f){null===e?null!==b&&null!==f&&(e=new google.maps.Marker({map:a,draggable:!0,position:new google.maps.LatLng(parseFloat(b),parseFloat(f))}),a.setZoom(16),a.panTo(e.position),google.maps.event.addListener(e,"dragend",function(){var a=e.getPosition();c.val(a.lat()),d.val(a.lng())})):(e.setPosition(new google.maps.LatLng(b,f)),a.panTo(e.position))},g=function(a){var b=a.latLng.lat(),e=a.latLng.lng();f(b,e),c.val(b),d.val(e)},h=function(){var e=$.extend({center:{lat:38.709792,lng:-9.133609},zoom:14},"undefined"==typeof handover.admin.mapOptions?{}:handover.admin.mapOptions);a=new google.maps.Map(b.find(".map")[0],e);var h=c.val(),i=d.val();""!==h&&""!==i&&f(h,i),google.maps.event.addListener(a,"rightclick",g)};google.maps.event.addDomListener(window,"load",h)}),$booleans=$(".active-boolean"),$booleans.length&&($booleans.click(function(a){a.stopPropagation(),$.post(handover.admin.urls.update,{_token:$('input[name="_token"]').val(),model:$(this).closest("table").data("model"),id:$(this).data("id"),column:$(this).data("column"),column_type:"boolean",value:$(this).prop("checked")})}),$booleans.closest("td").click(function(){$(this).find(".active-boolean").click()})),$(".filter-box").length){var a={width:"100%",no_results_text:handover.admin.strings.filter_no_results};$(".filter-box select").chosen(a),$(".filter-box select").chosen().change(function(a,b){$("#filter-submit-btn").removeAttr("disabled"),"undefined"!=typeof b.selected?($("#filter-form").append('<input type="hidden" name="'+$(this).data("name")+'[]" value="'+b.selected+'">'),$(this).parents(".filter-box").find("button").removeAttr("disabled")):($('input[value="'+b.deselected+'"]').remove(),0===$('input[name="'+$(this).data("name")+'[]"]').length&&$(this).parents(".filter-box").find("button").attr("disabled",""))}),$("#filter-submit-btn").click(function(){$("#filter-form").submit()}),$("#filter-clear-btn").click(function(){$('#filter-form input:not([name="_token"],.filter-nested)').remove(),$("#filter-form").submit()})}if($('a[role="tab"]').on("shown.bs.tab",function(a){var b=$(a.target).attr("href").substring(1),c=$("div.tab-pane#"+b);c.find(".photoset-row").attr("style","overflow: hidden;")}),$(".reorder-table").length){var b=$(".reorder-table tbody").sortable({revert:!0,helper:"clone",scroll:!1,axis:"y",placeholder:"sortable-placeholder"}).disableSelection();b.on("sortupdate",function(a,b){$(".reorder-table tbody > tr td:first-child").fadeOut().promise().done(function(){$(".reorder-table tbody > tr").each(function(a){$(this).find(" > td:first").text(a+1)}).promise().done(function(){$(".reorder-table tbody > tr td:first-child").fadeIn()})})})}});