$(function(){var a=function(a){a.add(a.siblings(":button, :submit")).prop("disabled",!0),a.addClass("loading")};if($(".click-once").click(function(){a($(this))}),$("form").submit(function(){var b=$(":submit",this);b.hasClass("submit-once")&&a(b)}),$(".delete").click(function(){$(this).closest("form").next(".delete-form").submit()}),$(".delete-form").submit(function(){var b=$(this).hasClass("user")?handover.admin.strings.delete_confirm_user:handover.admin.strings.delete_confirm;if(confirm(b)){var c=$(this).prev("form"),d=$(".delete",c);return a(d),!0}return!1}),$(".with-tooltip").tooltip(),$(".navbar").on("show.bs.dropdown",function(a){$el=$(a.target),$el.hasClass("with-tooltip")&&($el.tooltip("destroy"),$el.one("hide.bs.dropdown",function(){$el.tooltip()}))}),$(".rich-text").length&&tinymce.init($.extend({selector:".rich-text",content_css:handover.admin.urls.base+"/../vendor/clumsy/cms/css/tinymce.css",menubar:!1,toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | removeformat",statusbar:!1,plugins:"autoresize"},"undefined"==typeof handover.admin.tinymce?{}:handover.admin.tinymce)),$(".panel-translatable").length&&$(".panel-translatable .has-error").length&&$(".tab-pane").each(function(a,b){if($(".has-error",b).length){var c=$(b).attr("id");return $('a[href="#'+c+'"], a[data-target="'+c+'"]').tab("show"),!1}}),$(".datepicker").length&&$(".datepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".datetimepicker").length&&$(".datetimepicker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss"}),$(".timepicker").length&&$(".timepicker").timepicker({timeFormat:"HH:mm:ss"}),$(".colorpicker").length&&($(".colorpicker").iris($.extend({hide:!0},"undefined"==typeof handover.admin.colorpicker?{}:handover.admin.colorpicker)),$(document).on("click",function(a){if("form-control colorpicker"==$(a.target).attr("class"))$(a.target).iris("show");else{var b=$(".iris-picker, .iris-picker-inner");("undefined"==typeof a||!b.is(a.target)&&0===b.has(a.target).length)&&$(".colorpicker").iris("hide")}})),$(".location").length&&$(".location").each(function(){var a,b=$(".coordinates",this),c=null,d=new google.maps.Geocoder,e=b.find("input").eq(0),f=b.find("input").eq(1),g=$(".geocoder-btn",this).closest(".form-group").find("input"),h=function(b,d){null===c?(c=new google.maps.Marker({map:a,draggable:!0,position:b}),a.panTo(c.position),google.maps.event.addListener(c,"dragend",function(){j(c.getPosition(),!0)})):(c.setPosition(b),a.panTo(c.position)),j(b,d)},i=function(a){h(a.latLng)},j=function(a,b){b&&d.geocode({location:a},function(a,b){b==google.maps.GeocoderStatus.OK&&a[0]&&g.val(a[0].formatted_address)}),e.val(a.lat()),f.val(a.lng())},k=function(a){""!==String(a).trim()&&d.geocode({address:a},function(a,b){b==google.maps.GeocoderStatus.OK&&h(a[0].geometry.location,!1)})},l=function(){var c=$.extend({scrollwheel:!1,center:{lat:38.709792,lng:-9.133609},zoom:14},"undefined"==typeof handover.admin.mapOptions?{}:handover.admin.mapOptions);a=new google.maps.Map(b.find(".map")[0],c);var d=e.val(),j=f.val();if(""!==d&&""!==j){var k=new google.maps.LatLng(parseFloat(d),parseFloat(j));h(k,"undefined"==typeof g.attr("name")),a.setZoom(16)}google.maps.event.addListener(a,"rightclick",i)};google.maps.event.addDomListener(window,"load",l),$(".drop-pin",this).click(function(){h(a.getCenter(),!0)}),$(".geocoder-btn",this).click(function(){k(g.val())})}),$editableInline=$(".editable-inline"),$editableInline.length&&($editableInline.click(function(a){a.stopPropagation();var b={};b._method="PUT",b._token=$('input[name="_token"]').val(),b[$(this).data("column")]=$(this).is(":checkbox")?$(this).prop("checked")?1:0:$(this).val(),$.post($(this).closest("[data-update-url]").data("update-url").replace(":id",$(this).data("id")),b)}),$editableInline.closest("td").click(function(){$(this).find(".editable-inline").click()})),$(".filter-box").length){var b={width:"100%",no_results_text:handover.admin.strings.filter_no_results};$(".filter-box select").chosen(b),$(".filter-box select").chosen().change(function(a,b){$("#filter-submit-btn").removeAttr("disabled"),"undefined"!=typeof b.selected?($("#filter-form").append('<input type="hidden" name="'+$(this).data("name")+'[]" value="'+b.selected+'">'),$(this).parents(".filter-box").find("button").removeAttr("disabled")):($('input[value="'+b.deselected+'"]').remove(),0===$('input[name="'+$(this).data("name")+'[]"]').length&&$(this).parents(".filter-box").find("button").attr("disabled",""))}),$("#filter-submit-btn").click(function(){$("#filter-form").submit()}),$("#filter-clear-btn").click(function(){$('#filter-form input:not([name="_token"],.filter-nested)').remove(),$("#filter-form").submit()})}if($('a[role="tab"]').on("shown.bs.tab",function(a){var b=$(a.target).attr("href").substring(1),c=$("div.tab-pane#"+b);c.find(".photoset-row").attr("style","overflow: hidden;")}),$(".reorder-table").length){var c=$(".reorder-table tbody").sortable({helper:"clone",scroll:!1,axis:"y",placeholder:"sortable-placeholder"}).disableSelection();c.on("sortupdate",function(a,b){$(".reorder-table tbody > tr td:first-child").fadeOut().promise().done(function(){$(".reorder-table tbody > tr").each(function(a){$(this).find(" > td:first").text(a+1)}).promise().done(function(){$(".reorder-table tbody > tr td:first-child").fadeIn()})})})}});