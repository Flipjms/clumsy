{"version":3,"sources":["admin.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","$","clickOnce","$el","add","siblings","prop","addClass","click","this","submit","$submit","hasClass","closest","next","$form","prev","$del","msg","data","confirm","$pivots","chosen","width","tooltip","on","event","target","one","tinymce","init","extend","selector","content_css","handover","admin","urls","base","menubar","toolbar","statusbar","plugins","each","el","attr","tab","datepicker","dateFormat","datetimepicker","timeFormat","timepicker","iris","hide","colorpicker","document","container","is","has","map","$wrapper","marker","geocoder","google","maps","Geocoder","$lat","find","eq","$lng","$geocoderInput","setMarker","LatLng","updateAddress","Marker","draggable","position","panTo","addListener","updateMapInputs","getPosition","setPosition","updateMap","latLng","geocode","location","results","status","GeocoderStatus","OK","val","formatted_address","lat","lng","updateMapFromAddress","address","String","trim","geometry","initializeMap","mapOptions","scrollwheel","center","zoom","Map","parseFloat","setZoom","addDomListener","window","getCenter","$editableInline","stopPropagation","_method","_token","post","replace","$filterSelects","chosenOptions","no_results_text","first","change","selected","append","parents","deselected","remove","tab_id","substring","$tab","reorder","sortable","helper","scroll","axis","placeholder","disableSelection","ui","fadeOut","promise","done","index","text","fadeIn"],"mappings":"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","file":"admin.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n$(function () {\n\n    var clickOnce = function clickOnce($el) {\n        $el.add($el.siblings(':button, :submit')).prop('disabled', true);\n        $el.addClass('loading');\n    };\n\n    $('.click-once').click(function () {\n        clickOnce($(this));\n    });\n\n    $('form').submit(function () {\n        var $submit = $(':submit', this);\n        if ($submit.hasClass('submit-once')) {\n            clickOnce($submit);\n        }\n    });\n\n    $('.delete').click(function () {\n        $(this).closest('form').next('.delete-form').submit();\n    });\n    $('.delete-form').submit(function () {\n        var $form = $(this).prev('form'),\n            $del = $('.delete', $form),\n            msg = $del.data('confirmText');\n        if (confirm(msg)) {\n            clickOnce($del);\n            return true;\n        }\n        return false;\n    });\n\n    var $pivots = $('.pivot-field');\n    if ($pivots.length) {\n        $pivots.chosen({\n            width: '100%'\n        });\n    }\n\n    $('.with-tooltip').tooltip();\n    $('.navbar').on('show.bs.dropdown', function (event) {\n        var $el = $(event.target);\n        if ($el.hasClass('with-tooltip')) {\n            $el.tooltip('destroy');\n            $el.one('hide.bs.dropdown', function () {\n                $el.tooltip();\n            });\n        }\n    });\n\n    if ($('.rich-text').length) {\n        tinymce.init($.extend({\n            selector: \".rich-text\",\n            content_css: handover.admin.urls.base + '/../vendor/clumsy/cms/css/tinymce.css',\n            menubar: false,\n            toolbar: \"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | link | removeformat\",\n            statusbar: false,\n            plugins: \"autoresize,link\"\n        }, typeof handover.admin.tinymce === 'undefined' ? {} : handover.admin.tinymce));\n    }\n\n    // If a translatable panel pane has an error that prevents saving, switch to it\n    if ($('.panel-translatable').length && $('.panel-translatable .has-error').length) {\n        $('.tab-pane').each(function (i, el) {\n            if ($('.has-error', el).length) {\n                var target = $(el).attr('id');\n                $('a[href=\"#' + target + '\"], a[data-target=\"' + target + '\"]').tab('show');\n                return false;\n            }\n        });\n    }\n\n    if ($('.datepicker').length) {\n        $('.datepicker').datepicker({\n            dateFormat: 'yy-mm-dd'\n        });\n    }\n\n    if ($('.datetimepicker').length) {\n        $('.datetimepicker').datetimepicker({\n            dateFormat: 'yy-mm-dd',\n            timeFormat: 'HH:mm:ss'\n        });\n    }\n\n    if ($('.timepicker').length) {\n        $('.timepicker').timepicker({\n            timeFormat: 'HH:mm:ss'\n        });\n    }\n\n    if ($('.colorpicker').length) {\n        $('.colorpicker').iris($.extend({\n            hide: true\n        }, typeof handover.admin.colorpicker === 'undefined' ? {} : handover.admin.colorpicker));\n\n        $(document).on('click', function (e) {\n            if ($(e.target).attr('class') == 'form-control colorpicker') {\n                $(e.target).iris('show');\n            } else {\n                var container = $('.iris-picker, .iris-picker-inner');\n                if (typeof e === 'undefined' || !container.is(e.target) && container.has(e.target).length === 0) {\n                    $('.colorpicker').iris('hide');\n                }\n            }\n        });\n    }\n\n    if ($('.location').length) {\n\n        $('.location').each(function () {\n\n            var $wrapper = $('.coordinates', this),\n                map,\n                marker = null,\n                geocoder = new google.maps.Geocoder(),\n                $lat = $wrapper.find('input').eq(0),\n                $lng = $wrapper.find('input').eq(1),\n                $geocoderInput = $('.geocoder-btn', this).closest('.form-group').find('input');\n\n            var setMarker = function setMarker(LatLng, updateAddress) {\n                if (marker === null) {\n                    marker = new google.maps.Marker({\n                        map: map,\n                        draggable: true,\n                        position: LatLng\n                    });\n                    map.panTo(marker.position);\n\n                    google.maps.event.addListener(marker, 'dragend', function () {\n                        updateMapInputs(marker.getPosition(), true);\n                    });\n                } else {\n                    marker.setPosition(LatLng);\n                    map.panTo(marker.position);\n                }\n\n                updateMapInputs(LatLng, updateAddress);\n            };\n\n            var updateMap = function updateMap(event) {\n                setMarker(event.latLng);\n            };\n\n            var updateMapInputs = function updateMapInputs(LatLng, updateAddress) {\n                if (updateAddress) {\n                    geocoder.geocode({\n                        'location': LatLng\n                    }, function (results, status) {\n                        if (status == google.maps.GeocoderStatus.OK) {\n                            if (results[0]) {\n                                $geocoderInput.val(results[0].formatted_address);\n                            }\n                        }\n                    });\n                }\n\n                $lat.val(LatLng.lat());\n                $lng.val(LatLng.lng());\n            };\n\n            var updateMapFromAddress = function updateMapFromAddress(address) {\n                if (String(address).trim() !== '') {\n                    geocoder.geocode({\n                        'address': address\n                    }, function (results, status) {\n                        if (status == google.maps.GeocoderStatus.OK) {\n                            setMarker(results[0].geometry.location, false);\n                        }\n                    });\n                }\n            };\n\n            var initializeMap = function initializeMap() {\n                var mapOptions = $.extend({\n                    scrollwheel: false,\n                    center: {\n                        lat: 38.709792,\n                        lng: -9.133609\n                    },\n                    zoom: 14\n                }, typeof handover.admin.mapOptions === 'undefined' ? {} : handover.admin.mapOptions);\n\n                map = new google.maps.Map($wrapper.find('.map')[0], mapOptions);\n\n                var lat = $lat.val();\n                var lng = $lng.val();\n                if (lat !== '' && lng !== '') {\n                    var position = new google.maps.LatLng(parseFloat(lat), parseFloat(lng));\n                    setMarker(position, typeof $geocoderInput.attr('name') === 'undefined');\n                    map.setZoom(16);\n                }\n\n                google.maps.event.addListener(map, 'rightclick', updateMap);\n            };\n\n            google.maps.event.addDomListener(window, 'load', initializeMap);\n\n            $('.drop-pin', this).click(function () {\n                setMarker(map.getCenter(), true);\n            });\n\n            $('.geocoder-btn', this).click(function () {\n                updateMapFromAddress($geocoderInput.val());\n            });\n        });\n    }\n\n    var $editableInline = $('.editable-inline');\n    if ($editableInline.length) {\n        $editableInline.click(function (e) {\n            e.stopPropagation();\n            var data = {};\n            data._method = 'PUT';\n            data._token = $('input[name=\"_token\"]').val();\n            data[$(this).data('column')] = $(this).is(':checkbox') ? $(this).prop('checked') ? 1 : 0 : $(this).val();\n            $.post($(this).closest('[data-update-url]').data('update-url').replace(':id', $(this).data('id')), data);\n        });\n        $editableInline.closest('td').click(function () {\n            $(this).find('.editable-inline').click();\n        });\n    }\n\n    if ($('.filter-box').length) {\n        var $filterSelects = $('.filter-box select'),\n            chosenOptions = {\n            width: '100%',\n            no_results_text: $filterSelects.first().data('no-results-text')\n        };\n\n        $filterSelects.chosen(chosenOptions).change(function (e, data) {\n            $('#filter-submit-btn').prop('disabled', false);\n            if (typeof data.selected !== 'undefined') {\n                $('#filter-form').append('<input type=\"hidden\" name=\"' + $(this).data('name') + '[]\" value=\"' + data.selected + '\">');\n                $(this).parents('.filter-box').find('button').prop('disabled', false);\n                return true;\n            }\n\n            $('input[value=\"' + data.deselected + '\"]').remove();\n            if ($('input[name=\"' + $(this).data('name') + '[]\"]').length === 0) {\n                $(this).parents('.filter-box').find('button').prop('disabled', true);\n            }\n        });\n\n        $('#filter-submit-btn').click(function () {\n            $('#filter-form').submit();\n        });\n\n        $('#filter-clear-btn').click(function () {\n            $('#filter-form input:not([name=\"_token\"],.filter-nested)').remove();\n            $('#filter-form').submit();\n        });\n    }\n\n    $('a[role=\"tab\"]').on('shown.bs.tab', function (e) {\n        var tab_id = $(e.target).attr('href').substring(1);\n        var $tab = $('div.tab-pane#' + tab_id);\n\n        $tab.find('.photoset-row').attr('style', 'overflow: hidden;');\n    });\n\n    if ($('.reorder-table').length) {\n\n        var reorder = $(\".reorder-table tbody\").sortable({\n            helper: \"clone\",\n            scroll: false,\n            axis: \"y\",\n            placeholder: \"sortable-placeholder\"\n\n        }).disableSelection();\n\n        reorder.on('sortupdate', function (event, ui) {\n            $('.reorder-table tbody > tr td:first-child').fadeOut().promise().done(function () {\n                $('.reorder-table tbody > tr').each(function (index) {\n                    $(this).find(' > td:first').text(index + 1);\n                }).promise().done(function () {\n                    $('.reorder-table tbody > tr td:first-child').fadeIn();\n                });\n            });\n        });\n    }\n});\n\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}